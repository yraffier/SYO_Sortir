{% extends 'base.html.twig' %}

{% block nav %}
    <li><a href="{{ path('sortie_lister') }}">Accueil</a></li>
{% endblock %}

{% block body %}
<h3> Détail complet de la sortie </h3>
    <h3> {{ sortie.nom }} </h3>
    <div class="infosortie">
        <ul >
            <li>Débute à {{ sortie.dateHeureDebut | date('d-m-Y H:i') }}</li>
            <li>Point de rencontre {{ sortie.lieu.nom | upper }} - {{ sortie.lieu.ville.codePostal}} - {{ sortie.lieu.ville.nom | upper}}</li>
            <li>Durée : {{ sortie.duree | date('H:i') }} minutes</li>
            <li>{{ sortie.infosSortie }}</li>
            <li>Organisé par <a href="{{ path('sortir_detailProfil', {'utilisateur': sortie.organisateurs.id}) }}">{{ sortie.organisateurs.username }}</a> - CAMPUS {{ sortie.siteOrganisateur.nom | upper }}</li>
        </ul>
    </div>
    <div class="listeparticpants">
        <h5>Participants à la sortie ( date limite d'inscription {{ sortie.dateLimiteInscription | date('d-m-Y H:i') }})</h5>
        {% for participant in sortie.participants %}
            <li><a href="{{ path('sortir_detailProfil', {'utilisateur': participant.id}) }}">{{ participant.username }}</a></li>
        {% endfor %}
    </div>

    {% if sortie.dateHeureDebut >= datedujour or sortie.dateLimiteInscription >= datedujour %}
        {% if app.user is same as sortie.organisateurs %}
            {#        <button> <a href="path{{ 'sortie_annuler',{'sortie': sortie.id} }}"> Annuler la sortie </a> </button>#}
        {% else %}
            {% if sortie.participants is empty %}
                <button><a href="{{ path('sortie_inscription', {'sortie': sortie.id}) }}">S'inscrire</a></button>
            {% else %}
                {% if app.user in sortie.participants %}
                    <button><a href="{{ path('sortie_sedesinscrire', {'sortie': sortie.id}) }}"> Se desister </a></button>
                {% else %}
                    <button><a href="{{ path('sortie_inscription', {'sortie': sortie.id}) }}">S'inscrire</a></button>
                {% endif %}
            {% endif %}
        {% endif %}
    {% endif %}



    {% if app.user is same as sortie.organisateurs %}
         <a href={{ path('sortie_annulerMaSortie', {'sortie': sortie.id}) }}> Annuler la sortie </a>
    {% endif %}


{% endblock %}


{% block title %}

{% endblock %}

