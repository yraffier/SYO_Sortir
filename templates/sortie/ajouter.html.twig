
{% extends 'base.html.twig' %}

{% block nav1 %}
    <a href="{{ path('sortie_lister') }}"><li>Accueil</li></a>
{% endblock %}

{% block body %}

<h2> Cr√©er une Sortie</h2>
{{ form_start(sortieForm)}}
{{ form_widget(sortieForm) }}
    <button type="submit" name="Enregistrer" value="Enregistrer"> Enregistrer </button>
    <button type="submit" name="Ajouter" value="Ajouter"> Ajouter </button>
{{ form_end(sortieForm) }}
    <input type="button" onclick="location.href='{{ path('sortie_lister') }}';" value="Annuler" />
    <input type="button" onclick="location.href='{{ path('ville_ajouter') }}';" value="Ajouter une ville" />

    <script>
        $('#ajouter_sortie_ville').change(function () {

            let villeId = document.getElementById('ajouter_sortie_ville').value;
            let adresse = "/sortie/lieurecuperer/"+ villeId;
            $.ajax({
                url : adresse,
                type : "GET",
                dataType : "json",
                success: function (lieux){
                    let lieuSelect = $("#ajouter_sortie_lieu");
                    lieuSelect.html('');
                    for(let i =0; i < lieux.length; i++){
                        let textelieu = "<option value=" + lieux[i]["id"] + ">" + lieux[i]["nom"] + "</option>";

                        lieuSelect.append(textelieu);
                    }
                }
            });
        });

    </script>

{% endblock %}
{% block title %}

{% endblock %}
